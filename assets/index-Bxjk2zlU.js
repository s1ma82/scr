import{r as j,j as n,u as H,T as V,o as q,b as J}from"./index-Bikxwdcm.js";import{B as K}from"./index-B3OGdCLe.js";import{u as Q,N as E}from"./index-BEJx_bRc.js";import"./Add-th7y3UrN.js";import"./index-DHKYCD40.js";import"./index-COWprcGQ.js";import"./index-NvBJMd4i.js";import"./index-NmOOyEJu.js";const X={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function Y(s,e){const t=s.scrollSnapList();return typeof e=="number"?t.map(()=>e):e(t,s)}function Z(s,e){const t=s.rootNode();return e&&e(t)||t}function h(s={}){let e,t,u,m,c=null,i=0,r=!1,o=!1,f=!1,y=!1;function $(a,p){t=a;const{mergeOptions:w,optionsAtMedia:b}=p,W=w(X,h.globalOptions),z=w(W,s);if(e=b(z),t.scrollSnapList().length<=1)return;y=e.jump,u=!1,m=Y(t,e.delay);const{eventStore:x,ownerDocument:G}=t.internalEngine(),N=!!t.internalEngine().options.watchDrag,O=Z(t,e.rootNode);x.add(G,"visibilitychange",A),N&&t.on("pointerDown",I),N&&!e.stopOnInteraction&&t.on("pointerUp",v),e.stopOnMouseEnter&&x.add(O,"mouseenter",C),e.stopOnMouseEnter&&!e.stopOnInteraction&&x.add(O,"mouseleave",R),e.stopOnFocusIn&&t.on("slideFocusStart",d),e.stopOnFocusIn&&!e.stopOnInteraction&&x.add(t.containerNode(),"focusout",_),e.playOnInit&&_()}function D(){t.off("pointerDown",I).off("pointerUp",v).off("slideFocusStart",d),d(),u=!0,r=!1}function T(){const{ownerWindow:a}=t.internalEngine();a.clearTimeout(i),i=a.setTimeout(P,m[t.selectedScrollSnap()]),c=new Date().getTime(),t.emit("autoplay:timerset")}function L(){const{ownerWindow:a}=t.internalEngine();a.clearTimeout(i),i=0,c=null,t.emit("autoplay:timerstopped")}function _(){if(!u){if(S()){f=!0;return}r||t.emit("autoplay:play"),T(),r=!0}}function d(){u||(r&&t.emit("autoplay:stop"),L(),r=!1)}function A(){if(S())return f=r,d();f&&_()}function S(){const{ownerDocument:a}=t.internalEngine();return a.visibilityState==="hidden"}function I(){o||d()}function v(){o||_()}function C(){o=!0,d()}function R(){o=!1,_()}function U(a){typeof a<"u"&&(y=a),_()}function F(){r&&d()}function B(){r&&_()}function M(){return r}function P(){const{index:a}=t.internalEngine(),p=a.clone().add(1).get(),w=t.scrollSnapList().length-1,b=e.stopOnLastSnap&&p===w;if(t.canScrollNext()?t.scrollNext(y):t.scrollTo(0,y),t.emit("autoplay:select"),b)return d();_()}function k(){if(!c)return null;const a=m[t.selectedScrollSnap()],p=new Date().getTime()-c;return a-p}return{name:"autoplay",options:s,init:$,destroy:D,play:U,stop:F,reset:B,isPlaying:M,timeUntilNext:k}}h.globalOptions=void 0;const tt="_banner_1jylx_2",et="_embla_1jylx_15",nt="_emblaContainer_1jylx_20",st="_emblaSlide_1jylx_24",g={banner:tt,embla:et,emblaContainer:nt,emblaSlide:st};var ot={API_URL:"https://scr.opolo.me/api"};const at=({images:s,children:e,className:t,src:u,...m})=>{const[c,i]=Q({loop:!0},[h({jump:!1,delay:3e3,stopOnInteraction:!1})]);return j.useEffect(()=>{!i||!s||s.length===0||i.reInit()},[i,s]),n.jsxs("a",{className:`${g.banner} ${t}`,...m,children:[e,s&&s.length>0&&n.jsx("div",{className:g.embla,ref:c,children:n.jsx("div",{className:g.emblaContainer,children:s.map((r,o)=>n.jsx("div",{className:g.emblaSlide,children:n.jsx("img",{src:`${ot.API_URL}/files/${r.avatar}`,alt:`Баннер ${o+1}`})},o))})})]})},it="_news_178t8_1",rt="_news_container_178t8_6",lt="_news__title_178t8_11",ct="_news__cards_container_178t8_16",_t="_news__cards_178t8_16",dt="_card_178t8_23",ut="_maxy_178t8_31",mt="_card__text_178t8_36",ft="_card__title_178t8_41",pt="_card__tags_178t8_44",yt="_card__descr_178t8_47",wt="_card__img_178t8_50",xt="_mini_178t8_62",l={news:it,news_container:rt,news__title:lt,news__cards_container:ct,news__cards:_t,card:dt,maxy:ut,card__text:mt,card__title:ft,card__tags:pt,card__descr:yt,card__img:wt,mini:xt},Et=({children:s,className:e,...t})=>{const[u,m]=j.useState([]),{catalogs:c,newsList:i}=H(o=>o.catalogs),r=async()=>{const o=await J("banner");o&&m(o)};return j.useEffect(()=>{r()},[c]),n.jsx("div",{className:`${l.news} ${e} `,...t,children:n.jsxs("div",{className:`container ${l.news_container}`,children:[n.jsx(at,{images:u}),n.jsxs("div",{className:l.news__title,children:[n.jsx(V,{children:"Недавние новости"}),n.jsx(q,{to:"/news",children:n.jsx(K,{color:"white",children:"Читать ещё"})})]}),n.jsxs("div",{className:l.news__cards_container,children:[n.jsx("div",{className:`${l.news__cards} ${l.maxy}`,children:i&&n.jsx(E,{styles:l,data:i[0]})}),n.jsx("div",{className:`${l.news__cards} ${l.mini}`,children:i&&i.slice(1,4).map((o,f)=>n.jsx(E,{styles:l,data:o,index:f},`${o.id}#${f}`))})]})]})})};export{Et as default};
