import{j as e,c as o,i as N,m as S,k as V,r as m,C as $,n as b,V as q,o as f,a as w,I as z,u as C,p as H,T as M,O as L}from"./index-DzlKDA5o.js";import{B as k}from"./index-BDFs-gML.js";const O=({children:t,...n})=>e.jsx("i",{"data-name":"bi",className:t,...n}),P="_admin_155q5_1",E="_admin_container_155q5_5",F="_admin__tools_155q5_13",D="_tree_item_155q5_22",T="_back_155q5_25",A="_article_title_155q5_46",J="_tree_item_dropdown_155q5_55",R="_active_155q5_60",B="_tree_item_header_155q5_63",G="_tree_item_header_container_155q5_78",K="_focused_155q5_91",Q="_admin__content_155q5_94",s={admin:P,admin_container:E,admin__tools:F,tree_item:D,back:T,article_title:A,tree_item_dropdown:J,active:R,tree_item_header:B,tree_item_header_container:G,focused:K,admin__content:Q},U=o([e.jsx("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v8h2V5h18v16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"},"0"),e.jsx("circle",{cx:"9",cy:"10",r:"4"},"1"),e.jsx("path",{d:"M15.39 16.56C13.71 15.7 11.53 15 9 15s-4.71.7-6.39 1.56C1.61 17.07 1 18.1 1 19.22V22h16v-2.78c0-1.12-.61-2.15-1.61-2.66"},"2")],"CoPresent"),W=o(e.jsx("path",{d:"m22 3-1.67 1.67L18.67 3 17 4.67 15.33 3l-1.66 1.67L12 3l-1.67 1.67L8.67 3 7 4.67 5.33 3 3.67 4.67 2 3v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2zM11 19H4v-6h7zm9 0h-7v-2h7zm0-4h-7v-2h7zm0-4H4V8h16z"}),"Newspaper"),X=o(e.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"}),"Dashboard"),Y=o(e.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"}),"Collections"),Z=o(e.jsx("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm7 7V3.5L18.5 9z"}),"InsertDriveFile"),ee=o(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group"),u={news:e.jsx(W,{}),pages:e.jsx(X,{}),gallery:e.jsx(Y,{}),summary:e.jsx(z,{}),staff:e.jsx(ee,{})},y=({data:t,parent:n,params:r})=>{const{isHidden:c}=S(t.name),i=t.type==="catalog",d=V(),h=n?n&&i?`${n}/${t.name}`:`${n}/${t.id}`:t.name,g=r.id===t.id,[l,I]=m.useState(()=>{const a=localStorage.getItem("tree-expanded");return(a?JSON.parse(a):{})[t.id]||!1}),x=()=>{i&&I(a=>{const _=!a,p=localStorage.getItem("tree-expanded"),j=p?JSON.parse(p):{};return j[t.id]=_,localStorage.setItem("tree-expanded",JSON.stringify(j)),_})};return e.jsxs("div",{className:`${s.tree_item} ${l?s.active:""}`,children:[e.jsx("div",{onContextMenu:()=>!l&&x(),className:s.tree_item_header_container,children:e.jsx($,{parent:n,data:t,className:[s.tree_item_header,l?s.active:"",g?s.focused:""].join(" "),isCatalog:i,onClick:x,children:i?e.jsxs(e.Fragment,{children:[e.jsx("i",{children:e.jsx(b,{})}),u.hasOwnProperty(t.name)?u[t.name]:null,e.jsx("span",{children:t.title}),c&&e.jsx(q,{})]}):e.jsx(e.Fragment,{children:e.jsxs(f,{className:s.article_title,to:h,onClick:()=>d(w(t)),children:[e.jsx(Z,{}),e.jsx("span",{children:t.title})]})})})}),i&&l&&"entries"in t&&t.entries&&e.jsx("div",{className:`${s.tree_item_dropdown} ${l?s.active:""}`,children:t.entries.map((a,_)=>e.jsx(y,{data:a,parent:h,params:r},_))})]})},te=({catalogs:t})=>{const n=N();return t==null?void 0:t.map((r,c)=>e.jsx(y,{data:r,params:n},c))};function se(){const{catalogs:t}=C(c=>c.catalogs),[n,r]=m.useState(!0);return m.useEffect(()=>{H()},[]),e.jsxs("div",{className:s.admin,children:[e.jsx(k,{onClick:()=>r(c=>!c),children:"Нажми чтобы скрыть/показать"}),e.jsxs("div",{className:s.admin_container,children:[n&&e.jsxs("div",{className:s.admin__tools,children:[e.jsxs(M,{size:"2em",children:[e.jsx(O,{children:"bi bi-gear"})," СКР-Админ"]}),e.jsx(te,{catalogs:t}),e.jsx("div",{className:`${s.tree_item} ${s.back}`,children:e.jsxs(f,{className:s.tree_item_header,to:"/",children:[e.jsx(U,{})," Вернуться на сайт"]})})]}),e.jsx("div",{className:s.admin__content,children:e.jsx(L,{})})]})]})}const ne="_admin_container_1p6wd_1",v={admin_container:ne},ce=({children:t,className:n,...r})=>(m.useEffect(()=>{const c=document.querySelector("header"),i=document.querySelector("footer"),d=document.querySelector("#wrapper");if(!(!c||!i||!d))return c.style.display="none",i.style.display="none",d.classList.add("wrapper-admin"),()=>{d.classList.remove("wrapper-admin"),c.style.display="flex",i.style.display="flex"}},[]),e.jsx("div",{className:`${v.admin} ${n}`,...r,children:e.jsx("div",{className:`flex column ${v.admin_container}`,children:e.jsx(se,{})})})),oe=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));export{O as I,oe as a,ce as i};
