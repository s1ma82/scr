import{r as j,j as n,u as H,T as V,o as q,b as J}from"./index-DzlKDA5o.js";import{B as K}from"./index-BDFs-gML.js";import{u as Q,N as k}from"./index-CxLe7LQI.js";import"./Add-BjraWliP.js";import"./index-D1e8GVdt.js";import"./index-Cf3kMgUb.js";import"./index-C7Ar_xyy.js";import"./index-Ca8bQXSm.js";const X={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function Y(s,t){const e=s.scrollSnapList();return typeof t=="number"?e.map(()=>t):t(e,s)}function Z(s,t){const e=s.rootNode();return t&&t(e)||e}function h(s={}){let t,e,u,m,c=null,i=0,r=!1,o=!1,f=!1,y=!1;function E(a,p){e=a;const{mergeOptions:w,optionsAtMedia:b}=p,W=w(X,h.globalOptions),z=w(W,s);if(t=b(z),e.scrollSnapList().length<=1)return;y=t.jump,u=!1,m=Y(e,t.delay);const{eventStore:x,ownerDocument:G}=e.internalEngine(),N=!!e.internalEngine().options.watchDrag,O=Z(e,t.rootNode);x.add(G,"visibilitychange",L),N&&e.on("pointerDown",I),N&&!t.stopOnInteraction&&e.on("pointerUp",v),t.stopOnMouseEnter&&x.add(O,"mouseenter",A),t.stopOnMouseEnter&&!t.stopOnInteraction&&x.add(O,"mouseleave",C),t.stopOnFocusIn&&e.on("slideFocusStart",d),t.stopOnFocusIn&&!t.stopOnInteraction&&x.add(e.containerNode(),"focusout",_),t.playOnInit&&_()}function $(){e.off("pointerDown",I).off("pointerUp",v).off("slideFocusStart",d),d(),u=!0,r=!1}function D(){const{ownerWindow:a}=e.internalEngine();a.clearTimeout(i),i=a.setTimeout(M,m[e.selectedScrollSnap()]),c=new Date().getTime(),e.emit("autoplay:timerset")}function T(){const{ownerWindow:a}=e.internalEngine();a.clearTimeout(i),i=0,c=null,e.emit("autoplay:timerstopped")}function _(){if(!u){if(S()){f=!0;return}r||e.emit("autoplay:play"),D(),r=!0}}function d(){u||(r&&e.emit("autoplay:stop"),T(),r=!1)}function L(){if(S())return f=r,d();f&&_()}function S(){const{ownerDocument:a}=e.internalEngine();return a.visibilityState==="hidden"}function I(){o||d()}function v(){o||_()}function A(){o=!0,d()}function C(){o=!1,_()}function R(a){typeof a<"u"&&(y=a),_()}function U(){r&&d()}function F(){r&&_()}function B(){return r}function M(){const{index:a}=e.internalEngine(),p=a.clone().add(1).get(),w=e.scrollSnapList().length-1,b=t.stopOnLastSnap&&p===w;if(e.canScrollNext()?e.scrollNext(y):e.scrollTo(0,y),e.emit("autoplay:select"),b)return d();_()}function P(){if(!c)return null;const a=m[e.selectedScrollSnap()],p=new Date().getTime()-c;return a-p}return{name:"autoplay",options:s,init:E,destroy:$,play:R,stop:U,reset:F,isPlaying:B,timeUntilNext:P}}h.globalOptions=void 0;const ee="_banner_1jylx_2",te="_embla_1jylx_15",ne="_emblaContainer_1jylx_20",se="_emblaSlide_1jylx_24",g={banner:ee,embla:te,emblaContainer:ne,emblaSlide:se};var oe={API_URL:"https://scr.opolo.me/api"};const ae=({images:s,children:t,className:e,src:u,...m})=>{const[c,i]=Q({loop:!0},[h({jump:!1,delay:3e3,stopOnInteraction:!1})]);return j.useEffect(()=>{!i||!s||s.length===0||i.reInit()},[i,s]),n.jsxs("a",{className:`${g.banner} ${e}`,...m,children:[t,s&&s.length>0&&n.jsx("div",{className:g.embla,ref:c,children:n.jsx("div",{className:g.emblaContainer,children:s.map((r,o)=>n.jsx("div",{className:g.emblaSlide,children:n.jsx("img",{src:`${oe.API_URL}/files/${r.avatar}`,alt:`Баннер ${o+1}`})},o))})})]})},ie="_news_1y6k2_1",re="_news_container_1y6k2_6",le="_news__title_1y6k2_11",ce="_news__cards_container_1y6k2_16",_e="_news__cards_1y6k2_16",de="_card_1y6k2_23",ue="_maxy_1y6k2_32",me="_card__text_1y6k2_37",fe="_card__title_1y6k2_42",pe="_card__tags_1y6k2_45",ye="_card__descr_1y6k2_48",we="_card__img_1y6k2_51",xe="_mini_1y6k2_63",l={news:ie,news_container:re,news__title:le,news__cards_container:ce,news__cards:_e,card:de,maxy:ue,card__text:me,card__title:fe,card__tags:pe,card__descr:ye,card__img:we,mini:xe},ke=({children:s,className:t,...e})=>{const[u,m]=j.useState([]),{catalogs:c,newsList:i}=H(o=>o.catalogs),r=async()=>{const o=await J("banner");o&&m(o)};return j.useEffect(()=>{r()},[c]),n.jsx("div",{className:`${l.news} ${t} `,...e,children:n.jsxs("div",{className:`container ${l.news_container}`,children:[n.jsx(ae,{images:u}),n.jsxs("div",{className:l.news__title,children:[n.jsx(V,{children:"Недавние новости"}),n.jsx(q,{to:"/news",children:n.jsx(K,{color:"white",children:"Читать ещё"})})]}),n.jsxs("div",{className:l.news__cards_container,children:[n.jsx("div",{className:`${l.news__cards} ${l.maxy}`,children:i&&n.jsx(k,{styles:l,data:i[0]})}),n.jsx("div",{className:`${l.news__cards} ${l.mini}`,children:i&&i.slice(1,4).map((o,f)=>n.jsx(k,{styles:l,data:o,index:f},`${o.id}#${f}`))})]})]})})};export{ke as default};
